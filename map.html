<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <meta charset="utf-8" />
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- CSSファイルをインポート -->
    <?!= include('stylesheet'); ?>
</head>
<body>
    <div id="loader-overlay">
      <div class="spinner"></div>
      <div id="loader-text">データを読み込んでいます...</div>
    </div>
    <div id="app-container">
      <div id="map-wrapper">
        <div id="map"></div>
        <div id="controls">
          <div style="display: none;">
            <label>出発地:<select id="originSelect"><option value="all">すべて</option></select></label>
            <label>店舗:<select id="destinationSelect"><option value="all">すべて</option></select></label>
          </div>
          <fieldset>
            <legend>表示レイヤー</legend>
            <label><input type="checkbox" id="toggleTraffic" checked> 交通状況</label>
            <label><input type="checkbox" id="toggleWarnings" checked> 気象警報</label>
            <label><input type="checkbox" id="toggleEarthquakes" > 地震情報</label>
            <label><input type="checkbox" id="toggleTyphoons" checked> 台風情報</label>
            <label><input type="checkbox" id="toggleLsp" checked> 線状降水帯</label>
            <label><input type="checkbox" id="toggleOutages" checked> 停電情報</label>
            <label><input type="checkbox" id="toggleMonogatariStores" checked> 店舗</label>
            <div id="radar-controls">
              <label><input type="checkbox" id="toggleRadar"> 雨雲レーダー</label>
              <input type="range" id="radarOpacitySlider" min="0" max="1" step="0.1" value="0.7" style="display:none;">
            </div>
            <div id="last-updated"></div>
          </fieldset>
        </div>
      </div>
     <div id="info-panels-container">
          <div id="legend-panel" class="info-panel"><h3 class="panel-header" onclick="togglePanel(this)">警戒レベル凡例 ▾</h3><div class="panel-content"><div class="panel-inner-content"><div class="legend-item"><span class="legend-color-box" style="background-color: #800080; color: white;">5</span><div class="legend-text"><strong style="color: #800080;">【特別警報】命の危険 直ちに安全確保</strong><span>取るべき行動: 警戒レベル5に相当。災害が既に発生している可能性が極めて高い状況です。</span></div></div><div class="legend-item"><span class="legend-color-box" style="background-color: #FF00FF;">4</span><div class="legend-text"><strong style="color: #FF00FF;">【土砂災害警戒, 線状降水帯】危険な場所から全員避 nạn</strong><span>取るべき行動: 避難指示に相当。危険な場所から必ず避難してください。</span></div></div><div class="legend-item"><span class="legend-color-box" style="background-color: #FF0000;">3</span><div class="legend-text"><strong style="color: #FF0000;">【警報】危険な場所から高齢者等は避難</strong><span>取るべき行動: 高齢者等避難に相当。高齢者や支援が必要な方は避難を開始してください。</span></div></div></div></div></div>
        <div id="weatherWarnings" class="info-panel"><h3 class="panel-header" onclick="togglePanel(this)">気象警報・注意報 ▾</h3><div class="panel-content"><div class="panel-inner-content"><ul id="warningsList" style="list-style:none; padding:0; margin:0;"></ul></div></div></div>
        <div id="affectedStores" class="info-panel" style="background:#fff8e1;"><h3 class="panel-header" onclick="togglePanel(this)">影響下の店舗 ▾</h3><div class="panel-content"><div class="panel-inner-content"><ul id="affectedStoresList" style="list-style:none; padding:0; margin:0;"><li>現在、影響を受けている店舗はありません。</li></ul></div></div></div>
      </div>
    </div>
    
    <!-- JavaScriptファイルをインポート -->
    <?!= include('javascript'); ?>
</body>
</html>
